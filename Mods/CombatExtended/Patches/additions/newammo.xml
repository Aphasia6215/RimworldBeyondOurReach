<?xml version="1.0" encoding="UTF-8"?>
<Patch>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[similarTo="AmmoSet_Autocannon"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_Autocannon_Nc>BOR_Bullet_Autocannon_Nc</BOR_Ammo_Autocannon_Nc>
            <BOR_Ammo_Autocannon_Ni>BOR_Bullet_Autocannon_Ni</BOR_Ammo_Autocannon_Ni>
            <BOR_Ammo_Autocannon_CaP>BOR_Bullet_Autocannon_CaP</BOR_Ammo_Autocannon_CaP>
            <BOR_Ammo_Autocannon_EC>BOR_Bullet_Autocannon_EC</BOR_Ammo_Autocannon_EC>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_Autocannon"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_Autocannon_Nc>BOR_Bullet_Autocannon_Nc</BOR_Ammo_Autocannon_Nc>
            <BOR_Ammo_Autocannon_Ni>BOR_Bullet_Autocannon_Ni</BOR_Ammo_Autocannon_Ni>
            <BOR_Ammo_Autocannon_CaP>BOR_Bullet_Autocannon_CaP</BOR_Ammo_Autocannon_CaP>
            <BOR_Ammo_Autocannon_EC>BOR_Bullet_Autocannon_EC</BOR_Ammo_Autocannon_EC>
        </value>
    </Operation>

    <!-- Additional ammo type for 155mm howitzers -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_155mmHowitzerShell"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_155mmHowitzerShell_Ni>BOR_Bullet_155mmHowitzerShell_Ni</BOR_Ammo_155mmHowitzerShell_Ni>
            <BOR_Ammo_155mmHowitzerShell_Nc>BOR_Bullet_155mmHowitzerShell_Nc</BOR_Ammo_155mmHowitzerShell_Nc>
            <BOR_Ammo_155mmHowitzerShell_Ion_CM>BOR_Bullet_155mmHowitzerShell_Ion_CM</BOR_Ammo_155mmHowitzerShell_Ion_CM>
        </value>
    </Operation>

    <!-- Additional ammo type for 28cm monsters -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_28cmSpgrShell"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_28cmSpgrShell_Ni>BOR_Bullet_28cmSpgrShell_Ni</BOR_Ammo_28cmSpgrShell_Ni>
        </value>
    </Operation>

    <!-- Additional ammo type for 155mm howitzers -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_155mmHowitzerShell_directfire"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_155mmHowitzerShell_Ni>BOR_Bullet_155mmHowitzerShell_Ni_directfire</BOR_Ammo_155mmHowitzerShell_Ni>
            <BOR_Ammo_155mmHowitzerShell_Nc>BOR_Bullet_155mmHowitzerShell_Nc_directfire</BOR_Ammo_155mmHowitzerShell_Nc>
            <BOR_Ammo_155mmHowitzerShell_Ion_CM>BOR_Bullet_155mmHowitzerShell_Ion_CM_directfire</BOR_Ammo_155mmHowitzerShell_Ion_CM>
        </value>
    </Operation>

    <!-- Additional ammo type for 81mm mortar -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_81mmMortarShell"]/ammoTypes</xpath>
        <value>
            <BOR_Shell_Mortar_Ni>BOR_Bullet_81mmMortarShell_Ni</BOR_Shell_Mortar_Ni>
            <BOR_Shell_Mortar_Nc>BOR_Bullet_81mmMortarShell_Nc</BOR_Shell_Mortar_Nc>
            <BOR_Shell_Mortar_Ion_CM>BOR_Bullet_81mmMortarShell_Ion_CM</BOR_Shell_Mortar_Ion_CM>
        </value>
    </Operation>

    <!-- Additional ammo type for 130mm rockets -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_130mmType63"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_130mmType63_Ni>BOR_Bullet_130mmType63_Ni</BOR_Ammo_130mmType63_Ni>
            <BOR_Ammo_130mmType63_Ion_CM>BOR_Bullet_130mmType63_Ion_CM</BOR_Ammo_130mmType63_Ion_CM>
        </value>
    </Operation>

    <!-- Additional ammo type for heavy railguns -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_12mmRailgun"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_12mmRailgun_EC>Bullet_12mmRailgun_Sabot</BOR_Ammo_12mmRailgun_EC>
        </value>
    </Operation>

    <!-- Additional ammo type for railguns -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_8mmRailgun"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_8mmRailgun_EC>BOR_Bullet_8mmRailgun_EC</BOR_Ammo_8mmRailgun_EC>
        </value>
    </Operation>

    <!-- Additional ammo type for railguns -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_6mmRailgun"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_6mmRailgun_EC>BOR_Bullet_6mmRailgun_EC</BOR_Ammo_6mmRailgun_EC>
        </value>
    </Operation>

    <!-- Additional shell for devastator turret -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>More Vanilla Turrets 1.1+</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>

                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>

                        <ThingDef Class="CombatExtended.AmmoDef" ParentName="81mmMortarShellBaseCraftableBase">
                            <defName>BOR_Shell_CMDev</defName>
                            <label>81mm mortar shell (Neutronium)</label>
                            <graphicData>
                                <texPath>ThirdParty/More Vanilla Turrets/PlasmaMortarShell</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                            </graphicData>
                            <statBases>
                                <MarketValue>355</MarketValue>
                                <Mass>4.3</Mass>
                                <Bulk>5.4</Bulk>
                            </statBases>
                            <ammoClass>BOR_Ni_AmmoClass</ammoClass>
                            <detonateProjectile>BOR_Bullet_81mmMortarShell_NeutroniumDevastator</detonateProjectile>
                            <generateCommonality>0.01</generateCommonality>
                        </ThingDef>

                        <ThingDef ParentName="Base81mmMortarShell">
                            <defName>BOR_Bullet_81mmMortarShell_NeutroniumDevastator</defName>
                            <label>81mm mortar shell (Neutronium)</label>
                            <graphicData>
                                <texPath>ThirdParty/More Vanilla Turrets/PlasmaMortarProj</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                            </graphicData>
                            <projectile Class="CombatExtended.ProjectilePropertiesCE">
                                <damageDef>Bomb</damageDef>
                                <damageAmountBase>786</damageAmountBase>
                                <armorPenetrationSharp>2</armorPenetrationSharp>
                                <armorPenetrationBlunt>2</armorPenetrationBlunt>
                                <explosionRadius>7.5</explosionRadius>
                                <flyOverhead>true</flyOverhead>
                                <explosionChanceToStartFire>0</explosionChanceToStartFire>
                                <applyDamageToExplosionCellsNeighbors>true</applyDamageToExplosionCellsNeighbors>
                                <explosionEffect>GiantExplosion</explosionEffect>
                                <soundExplode>Explosion_GiantBomb</soundExplode>
                            </projectile>
                        </ThingDef>

                        <RecipeDef ParentName="AmmoRecipeBase">
                            <defName>MakeBOR_Shell_CMDev</defName>
                            <label>make 81mm Neutronium-infused mortar shells x5</label>
                            <description>Craft 5 81mm Neutronium-infused mortar shells.</description>
                            <jobString>Making 81mm Neutronium-infused mortar shells.</jobString>
                            <workAmount>73800</workAmount>
                            <ingredients>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>BOR_Sunsteel</li>
                                        </thingDefs>
                                    </filter>
                                    <count>120</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>BOR_Neutronium</li>
                                        </thingDefs>
                                    </filter>
                                    <count>15</count>
                                </li>
                                <li>
                                    <filter>
                                        <thingDefs>
                                            <li>ComponentSpacer</li>
                                        </thingDefs>
                                    </filter>
                                    <count>2</count>
                                </li>
                            </ingredients>
                            <fixedIngredientFilter>
                                <thingDefs>
                                    <li>BOR_Sunsteel</li>
                                    <li>ComponentSpacer</li>
                                    <li>BOR_Neutronium</li>
                                </thingDefs>
                            </fixedIngredientFilter>
                            <products>
                                <BOR_Shell_CMDev>5</BOR_Shell_CMDev>
                            </products>
                        </RecipeDef>

                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_81mmMortarShell_Plasma"]/ammoTypes</xpath>
                    <value>
                        <BOR_Shell_CMDev>BOR_Bullet_81mmMortarShell_NeutroniumDevastator</BOR_Shell_CMDev>
                    </value>
                </li>

            </operations>
        </match>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[similarTo="AmmoSet_AntiMateriel"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_AntiMateriel_FSJ>BOR_Bullet_AntiMat_FSJ</BOR_Ammo_AntiMateriel_FSJ>
            <BOR_Ammo_AntiMateriel_Ni>BOR_Bullet_AntiMat_Ni</BOR_Ammo_AntiMateriel_Ni>
            <BOR_Ammo_AntiMateriel_CaP>BOR_Bullet_AntiMat_CaP</BOR_Ammo_AntiMateriel_CaP>
            <BOR_Ammo_AntiMateriel_EC>BOR_Bullet_AntiMat_EC</BOR_Ammo_AntiMateriel_EC>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_AntiMateriel"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_AntiMateriel_FSJ>BOR_Bullet_AntiMat_FSJ</BOR_Ammo_AntiMateriel_FSJ>
            <BOR_Ammo_AntiMateriel_Ni>BOR_Bullet_AntiMat_Ni</BOR_Ammo_AntiMateriel_Ni>
            <BOR_Ammo_AntiMateriel_CaP>BOR_Bullet_AntiMat_CaP</BOR_Ammo_AntiMateriel_CaP>
            <BOR_Ammo_AntiMateriel_EC>BOR_Bullet_AntiMat_EC</BOR_Ammo_AntiMateriel_EC>
        </value>
    </Operation>

    <!-- Additional charged -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[similarTo="AmmoSet_ChargedPistol"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_PistolCharged_CM>BOR_Bullet_ChargedPistol_CM</BOR_Ammo_PistolCharged_CM>
            <BOR_Ammo_PistolCharged_AP_CM>BOR_Bullet_ChargedPistol_AP_CM</BOR_Ammo_PistolCharged_AP_CM>
            <BOR_Ammo_PistolCharged_Ion_CM>BOR_Bullet_ChargedPistol_Ion_CM</BOR_Ammo_PistolCharged_Ion_CM>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_ChargedPistol"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_PistolCharged_CM>BOR_Bullet_ChargedPistol_CM</BOR_Ammo_PistolCharged_CM>
            <BOR_Ammo_PistolCharged_AP_CM>BOR_Bullet_ChargedPistol_AP_CM</BOR_Ammo_PistolCharged_AP_CM>
            <BOR_Ammo_PistolCharged_Ion_CM>BOR_Bullet_ChargedPistol_Ion_CM</BOR_Ammo_PistolCharged_Ion_CM>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[similarTo="AmmoSet_ChargedRifle"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_RifleCharged_CM>BOR_Bullet_ChargedRifle_CM</BOR_Ammo_RifleCharged_CM>
            <BOR_Ammo_RifleCharged_AP_CM>BOR_Bullet_ChargedRifle_AP_CM</BOR_Ammo_RifleCharged_AP_CM>
            <BOR_Ammo_RifleCharged_Ion_CM>BOR_Bullet_ChargedRifle_Ion_CM</BOR_Ammo_RifleCharged_Ion_CM>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_ChargedRifle"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_RifleCharged_CM>BOR_Bullet_ChargedRifle_CM</BOR_Ammo_RifleCharged_CM>
            <BOR_Ammo_PistolCharged_AP_CM>BOR_Bullet_ChargedRifle_AP_CM</BOR_Ammo_PistolCharged_AP_CM>
            <BOR_Ammo_RifleCharged_Ion_CM>BOR_Bullet_ChargedRifle_Ion_CM</BOR_Ammo_RifleCharged_Ion_CM>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[similarTo="AmmoSet_ChargedHeavy"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_HeavyCharged_CM>BOR_Bullet_ChargedHeavy_CM</BOR_Ammo_HeavyCharged_CM>
            <BOR_Ammo_HeavyCharged_AP_CM>BOR_Bullet_ChargedHeavy_AP_CM</BOR_Ammo_HeavyCharged_AP_CM>
            <BOR_Ammo_HeavyCharged_Ion_CM>BOR_Bullet_ChargedHeavy_Ion_CM</BOR_Ammo_HeavyCharged_Ion_CM>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_ChargedHeavy"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_HeavyCharged_CM>BOR_Bullet_ChargedHeavy_CM</BOR_Ammo_HeavyCharged_CM>
            <BOR_Ammo_HeavyCharged_AP_CM>BOR_Bullet_ChargedHeavy_AP_CM</BOR_Ammo_HeavyCharged_AP_CM>
            <BOR_Ammo_HeavyCharged_Ion_CM>BOR_Bullet_ChargedHeavy_Ion_CM</BOR_Ammo_HeavyCharged_Ion_CM>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[similarTo="AmmoSet_ChargedShotgun"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_ShotgunCharged_CM>BOR_Bullet_ChargedShotgun_CM</BOR_Ammo_ShotgunCharged_CM>
            <BOR_Ammo_ShotgunCharged_CA_Slug>BOR_Bullet_ChargedShotgun_Slug_CM</BOR_Ammo_ShotgunCharged_CA_Slug>
            <BOR_Ammo_ShotgunCharged_Ion_CM>BOR_Bullet_ChargedShotgun_Ion_CM</BOR_Ammo_ShotgunCharged_Ion_CM>
        </value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_ChargedShotgun"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_ShotgunCharged_CM>BOR_Bullet_ChargedShotgun_CM</BOR_Ammo_ShotgunCharged_CM>
            <BOR_Ammo_ShotgunCharged_CA_Slug>BOR_Bullet_ChargedShotgun_Slug_CM</BOR_Ammo_ShotgunCharged_CA_Slug>
            <BOR_Ammo_ShotgunCharged_Ion_CM>BOR_Bullet_ChargedShotgun_Ion_CM</BOR_Ammo_ShotgunCharged_Ion_CM>
        </value>
    </Operation>
</Patch>