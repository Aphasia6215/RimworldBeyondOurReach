<?xml version="1.0" encoding="UTF-8"?>
<Patch>

    <!-- Normal Ammo -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_75x350mmR"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_75x350mmR_QaP>BOR_Bullet_75x350mmR_QaP</BOR_Ammo_75x350mmR_QaP>
            <BOR_Ammo_75x350mmR_Ni>BOR_Bullet_75x350mmR_Ni</BOR_Ammo_75x350mmR_Ni>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_120mmCannonShell"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_120mmCannonShell_NiAT>BOR_Bullet_120mmCannonShell_NiAT</BOR_Ammo_120mmCannonShell_NiAT>
            <BOR_Ammo_120mmCannonShell_Ni>BOR_Bullet_120mmCannonShell_Ni</BOR_Ammo_120mmCannonShell_Ni>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_105x617mmRCannonShell"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_105x617mmRCannonShell_NiAT>BOR_Bullet_105x617mmRCannonShell_NiAT</BOR_Ammo_105x617mmRCannonShell_NiAT>
            <BOR_Ammo_105x617mmRCannonShell_Ni>BOR_Bullet_105x617mmRCannonShell_Ni</BOR_Ammo_105x617mmRCannonShell_Ni>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_762x51mmNATO"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_762x51mmNATO_TC>BOR_Bullet_762x51mmNATO_TC</BOR_Ammo_762x51mmNATO_TC>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_57x307mmR"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_57x307mmR_QaP>BOR_Bullet_57x307mmR_QaP</BOR_Ammo_57x307mmR_QaP>
            <BOR_Ammo_57x307mmR_Ni>BOR_Bullet_57x307mmR_Ni</BOR_Ammo_57x307mmR_Ni>
        </value>
    </Operation>

    <!-- generic ammo -->

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_HeavyCannon"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_120mmCannonShell_NiAT>BOR_Bullet_120mmCannonShell_NiAT</BOR_Ammo_120mmCannonShell_NiAT>
            <BOR_Ammo_120mmCannonShell_Ni>BOR_Bullet_120mmCannonShell_Ni</BOR_Ammo_120mmCannonShell_Ni>
            <BOR_Ammo_105x617mmRCannonShell_NiAT>BOR_Bullet_105x617mmRCannonShell_NiAT</BOR_Ammo_105x617mmRCannonShell_NiAT>
            <BOR_Ammo_105x617mmRCannonShell_Ni>BOR_Bullet_105x617mmRCannonShell_Ni</BOR_Ammo_105x617mmRCannonShell_Ni>
            <BOR_Ammo_28cmSpgrShell_Ni>BOR_Bullet_28cmSpgrShell_Ni</BOR_Ammo_28cmSpgrShell_Ni>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_LightCannon"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_57x307mmR_QaP>BOR_Bullet_57x307mmR_QaP</BOR_Ammo_57x307mmR_QaP>
            <BOR_Ammo_57x307mmR_Ni>BOR_Bullet_57x307mmR_Ni</BOR_Ammo_57x307mmR_Ni>
            <BOR_Ammo_75x350mmR_QaP>BOR_Bullet_75x350mmR_QaP</BOR_Ammo_75x350mmR_QaP>
            <BOR_Ammo_75x350mmR_Ni>BOR_Bullet_75x350mmR_Ni</BOR_Ammo_75x350mmR_Ni>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_Rifle"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_762x51mmNATO_TC>BOR_Bullet_762x51mmNATO_TC</BOR_Ammo_762x51mmNATO_TC>
        </value>
    </Operation>


    <!-- Additional shell for devastator turret -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Vanilla Vehicles Expanded</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Tango Bullet_20x102mmNATO_AP -> Autocannon -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Tango_MainTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_Autocannon_Nc</li>
                        <li>BOR_Ammo_Autocannon_Ni</li>
                        <li>BOR_Ammo_Autocannon_QaP</li>
                        <li>BOR_Ammo_Autocannon_TC</li>
                    </value>
                </li>
                <!-- Bulldog Bullet_75x350mmR_HE -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Bulldog_MainTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_75x350mmR_QaP</li>
                        <li>BOR_Ammo_75x350mmR_Ni</li>
                    </value>
                </li>
                <!-- Highwayman Bullet_762x51mmNATO_FMJ -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Highwayman_MainTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_762x51mmNATO_TC</li>
                    </value>
                </li>
                <!-- Roadkill Bullet_57x307mmR_HE -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Roadkill_MainTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_57x307mmR_QaP</li>
                        <li>BOR_Ammo_57x307mmR_Ni</li>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>


    <!-- Additional shell for devastator turret -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Synthetik - Vehicle</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Sat7_MainGun"]/ammunition/thingDefs</xpath>
                    <!-- 100mm -->
                    <value>
                        <li>BOR_Ammo_100mmEnergyCanister_Ni</li>
                        <li>BOR_Ammo_100mmEnergyCanister_Ion_N</li>
                        <li>BOR_Ammo_100mmEnergyCanister_TCP</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Sat7_CoaxLaser"]/ammunition/thingDefs</xpath>
                    <!-- lasercell -->
                    <value>
                        <li>BOR_Ammo_SynthetikLaserCell_TC</li>
                        <li>BOR_Ammo_SynthetikLaserCell_N</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Sat7_TopLaser"]/ammunition/thingDefs</xpath>
                    <!-- lasercell -->
                    <value>
                        <li>BOR_Ammo_SynthetikLaserCell_TC</li>
                        <li>BOR_Ammo_SynthetikLaserCell_N</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Z277_Autocannon"]/ammunition/thingDefs</xpath>
                    <!-- 09mm -->
                    <value>
                        <li>BOR_Ammo_09cmSplit_QaP</li>
                        <li>BOR_Ammo_09cmSplit_Nc</li>
                        <li>BOR_Ammo_09cmSplit_QaPNi</li>
                        <li>BOR_Ammo_09cmSplit_TC</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Z277_RocketTube"]/ammunition/thingDefs</xpath>
                    <!-- 76mm -->
                    <value>
                        <li>BOR_Ammo_76mmMissile_Ni</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_09cmSplit"]/ammoTypes</xpath>
                    <value>
                        <BOR_Ammo_09cmSplit_QaP>BOR_Bullet_09cmSplit_QaP</BOR_Ammo_09cmSplit_QaP>
                        <BOR_Ammo_09cmSplit_Nc>BOR_Bullet_09cmSplit_Nc</BOR_Ammo_09cmSplit_Nc>
                        <BOR_Ammo_09cmSplit_QaPNi>BOR_Bullet_09cmSplit_QaPNi</BOR_Ammo_09cmSplit_QaPNi>
                        <BOR_Ammo_09cmSplit_TC>BOR_Bullet_09cmSplit_TC</BOR_Ammo_09cmSplit_TC>
                    </value>
                </li>
                <li Class="PatchOperationRemove">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_09cmSplit"]/similarTo</xpath>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_76mmMissile"]/ammoTypes</xpath>
                    <value>
                        <BOR_Ammo_76mmMissile_Ni>BOR_Bullet_76mmMissile_Ni</BOR_Ammo_76mmMissile_Ni>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_100mmEnergyCanister"]/ammoTypes</xpath>
                    <value>
                        <BOR_Ammo_100mmEnergyCanister_Ni>BOR_Bullet_100mmEnergyCanister_Ni</BOR_Ammo_100mmEnergyCanister_Ni>
                        <BOR_Ammo_100mmEnergyCanister_Ion_N>BOR_Bullet_100mmEnergyCanister_Ion_N</BOR_Ammo_100mmEnergyCanister_Ion_N>
                        <BOR_Ammo_100mmEnergyCanister_TCP>BOR_Bullet_100mmEnergyCanister_TCP</BOR_Ammo_100mmEnergyCanister_TCP>
                    </value>
                </li>
                <li Class="PatchOperationRemove">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_SynthetikLaserCell"]/similarTo</xpath>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_SynthetikLaserCell"]/ammoTypes</xpath>
                    <value>
                        <BOR_Ammo_SynthetikLaserCell_TC>BOR_Bullet_SynthetikLaserCell_TC</BOR_Ammo_SynthetikLaserCell_TC>
                        <BOR_Ammo_SynthetikLaserCell_N>BOR_Bullet_SynthetikLaserCell_N</BOR_Ammo_SynthetikLaserCell_N>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>RimThunder - Roaring Tiger</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- M1A2 Bullet_120mmCannonShell_HEAT -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="RT_M1A2_Tank_Turret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_120mmCannonShell_NiAT</li>
                        <li>BOR_Ammo_120mmCannonShell_Ni</li>
                    </value>
                </li>

                <!-- m48H Bullet_105x617mmRCannonShell_HEAT -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="RT_M48H_Tank_Turret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_105x617mmRCannonShell_NiAT</li>
                        <li>BOR_Ammo_105x617mmRCannonShell_Ni</li>
                    </value>
                </li>
                <!-- RT_M113M_APC_Turret 81mm -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="RT_M113M_APC_Turret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Shell_Mortar_Ni</li>
                        <li>BOR_Shell_Mortar_Nc</li>
                        <li>BOR_Shell_Mortar_Ion_N</li>
                        <li MayRequire="paradox.morevanillaturrets">BOR_Shell_NDev</li>
                    </value>
                </li>

                <!-- RT Turrets -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="RT_M1A2T_SecondaryTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_AntiMateriel_FSJ</li>
                        <li>BOR_Ammo_AntiMateriel_Ni</li>
                        <li>BOR_Ammo_AntiMateriel_QaP</li>
                        <li>BOR_Ammo_AntiMateriel_TC</li>
                    </value>
                </li>

                <li Class="PatchOperationAdd">
                    <xpath> Defs/Vehicles.VehicleTurretDef[defName="RT_M2HB_MGTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_AntiMateriel_FSJ</li>
                        <li>BOR_Ammo_AntiMateriel_Ni</li>
                        <li>BOR_Ammo_AntiMateriel_QaP</li>
                        <li>BOR_Ammo_AntiMateriel_TC</li>
                    </value>
                </li>

                <li Class="PatchOperationAdd">
                    <xpath> Defs/Vehicles.VehicleTurretDef[defName="RT_M249_MGTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_762x51mmNATO_TC</li>
                    </value>
                </li>

                <li Class="PatchOperationAdd">
                    <xpath> Defs/Vehicles.VehicleTurretDef[defName="RT_M249_MGTurret_HEMTT"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_762x51mmNATO_TC</li>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>