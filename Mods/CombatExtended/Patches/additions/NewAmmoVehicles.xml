<?xml version="1.0" encoding="UTF-8"?>
<Patch>

    <!-- Normal Ammo -->
    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_75x350mmR"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_75x350mmR_CaP>BOR_Bullet_75x350mmR_CaP</BOR_Ammo_75x350mmR_CaP>
            <BOR_Ammo_75x350mmR_CMi>BOR_Bullet_75x350mmR_CMi</BOR_Ammo_75x350mmR_CMi>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_120mmCannonShell"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_120mmCannonShell_CMiAT>BOR_Bullet_120mmCannonShell_CMiAT</BOR_Ammo_120mmCannonShell_CMiAT>
            <BOR_Ammo_120mmCannonShell_CMi>BOR_Bullet_120mmCannonShell_CMi</BOR_Ammo_120mmCannonShell_CMi>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_105x617mmRCannonShell"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_105x617mmRCannonShell_CMiAT>BOR_Bullet_105x617mmRCannonShell_CMiAT</BOR_Ammo_105x617mmRCannonShell_CMiAT>
            <BOR_Ammo_105x617mmRCannonShell_CMi>BOR_Bullet_105x617mmRCannonShell_CMi</BOR_Ammo_105x617mmRCannonShell_CMi>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_762x51mmNATO"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_762x51mmNATO_EC>BOR_Bullet_762x51mmNATO_EC</BOR_Ammo_762x51mmNATO_EC>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_57x307mmR"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_57x307mmR_CaP>BOR_Bullet_57x307mmR_CaP</BOR_Ammo_57x307mmR_CaP>
            <BOR_Ammo_57x307mmR_CMi>BOR_Bullet_57x307mmR_CMi</BOR_Ammo_57x307mmR_CMi>
        </value>
    </Operation>

    <!-- generic ammo -->

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_HeavyCannon"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_120mmCannonShell_CMiAT>BOR_Bullet_120mmCannonShell_CMiAT</BOR_Ammo_120mmCannonShell_CMiAT>
            <BOR_Ammo_120mmCannonShell_CMi>BOR_Bullet_120mmCannonShell_CMi</BOR_Ammo_120mmCannonShell_CMi>
            <BOR_Ammo_105x617mmRCannonShell_CMiAT>BOR_Bullet_105x617mmRCannonShell_CMiAT</BOR_Ammo_105x617mmRCannonShell_CMiAT>
            <BOR_Ammo_105x617mmRCannonShell_CMi>BOR_Bullet_105x617mmRCannonShell_CMi</BOR_Ammo_105x617mmRCannonShell_CMi>
            <BOR_Ammo_28cmSpgrShell_CMi>BOR_Bullet_28cmSpgrShell_CMi</BOR_Ammo_28cmSpgrShell_CMi>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_LightCannon"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_57x307mmR_CaP>BOR_Bullet_57x307mmR_CaP</BOR_Ammo_57x307mmR_CaP>
            <BOR_Ammo_57x307mmR_CMi>BOR_Bullet_57x307mmR_CMi</BOR_Ammo_57x307mmR_CMi>
            <BOR_Ammo_75x350mmR_CaP>BOR_Bullet_75x350mmR_CaP</BOR_Ammo_75x350mmR_CaP>
            <BOR_Ammo_75x350mmR_CMi>BOR_Bullet_75x350mmR_CMi</BOR_Ammo_75x350mmR_CMi>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_Rifle"]/ammoTypes</xpath>
        <value>
            <BOR_Ammo_762x51mmNATO_EC>BOR_Bullet_762x51mmNATO_EC</BOR_Ammo_762x51mmNATO_EC>
        </value>
    </Operation>


    <!-- Additional shell for devastator turret -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Vanilla Vehicles Expanded</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Tango Bullet_20x102mmNATO_AP -> Autocannon -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Tango_MainTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_Autocannon_CMc</li>
                        <li>BOR_Ammo_Autocannon_CMi</li>
                        <li>BOR_Ammo_Autocannon_CaP</li>
                        <li>BOR_Ammo_Autocannon_EC</li>
                    </value>
                </li>
                <!-- Bulldog Bullet_75x350mmR_HE -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Bulldog_MainTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_75x350mmR_CaP</li>
                        <li>BOR_Ammo_75x350mmR_CMi</li>
                    </value>
                </li>
                <!-- Highwayman Bullet_762x51mmNATO_FMJ -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Highwayman_MainTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_762x51mmNATO_EC</li>
                    </value>
                </li>
                <!-- Roadkill Bullet_57x307mmR_HE -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Roadkill_MainTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_57x307mmR_CaP</li>
                        <li>BOR_Ammo_57x307mmR_CMi</li>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>


    <!-- Additional shell for devastator turret -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Synthetik - Vehicle</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Sat7_MainGun"]/ammunition/thingDefs</xpath>
                    <!-- 100mm -->
                    <value>
                        <li>BOR_Ammo_100mmEnergyCanister_CMi</li>
                        <li>BOR_Ammo_100mmEnergyCanister_Ion_CM</li>
                        <li>BOR_Ammo_100mmEnergyCanister_ECP</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Sat7_CoaxLaser"]/ammunition/thingDefs</xpath>
                    <!-- lasercell -->
                    <value>
                        <li>BOR_Ammo_SynthetikLaserCell_EC</li>
                        <li>BOR_Ammo_SynthetikLaserCell_CM</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Sat7_TopLaser"]/ammunition/thingDefs</xpath>
                    <!-- lasercell -->
                    <value>
                        <li>BOR_Ammo_SynthetikLaserCell_EC</li>
                        <li>BOR_Ammo_SynthetikLaserCell_CM</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Z277_Autocannon"]/ammunition/thingDefs</xpath>
                    <!-- 09mm -->
                    <value>
                        <li>BOR_Ammo_09cmSplit_CaP</li>
                        <li>BOR_Ammo_09cmSplit_CMc</li>
                        <li>BOR_Ammo_09cmSplit_CaPCMi</li>
                        <li>BOR_Ammo_09cmSplit_EC</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="Z277_RocketTube"]/ammunition/thingDefs</xpath>
                    <!-- 76mm -->
                    <value>
                        <li>BOR_Ammo_76mmMissile_CMi</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_09cmSplit"]/ammoTypes</xpath>
                    <value>
                        <BOR_Ammo_09cmSplit_CaP>BOR_Bullet_09cmSplit_CaP</BOR_Ammo_09cmSplit_CaP>
                        <BOR_Ammo_09cmSplit_CMc>BOR_Bullet_09cmSplit_CMc</BOR_Ammo_09cmSplit_CMc>
                        <BOR_Ammo_09cmSplit_CaPCMi>BOR_Bullet_09cmSplit_CaPCMi</BOR_Ammo_09cmSplit_CaPCMi>
                        <BOR_Ammo_09cmSplit_EC>BOR_Bullet_09cmSplit_EC</BOR_Ammo_09cmSplit_EC>
                    </value>
                </li>
                <li Class="PatchOperationRemove">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_09cmSplit"]/similarTo</xpath>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_76mmMissile"]/ammoTypes</xpath>
                    <value>
                        <BOR_Ammo_76mmMissile_CMi>BOR_Bullet_76mmMissile_CMi</BOR_Ammo_76mmMissile_CMi>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_100mmEnergyCanister"]/ammoTypes</xpath>
                    <value>
                        <BOR_Ammo_100mmEnergyCanister_CMi>BOR_Bullet_100mmEnergyCanister_CMi</BOR_Ammo_100mmEnergyCanister_CMi>
                        <BOR_Ammo_100mmEnergyCanister_Ion_CM>BOR_Bullet_100mmEnergyCanister_Ion_CM</BOR_Ammo_100mmEnergyCanister_Ion_CM>
                        <BOR_Ammo_100mmEnergyCanister_ECP>BOR_Bullet_100mmEnergyCanister_ECP</BOR_Ammo_100mmEnergyCanister_ECP>
                    </value>
                </li>
                <li Class="PatchOperationRemove">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_SynthetikLaserCell"]/similarTo</xpath>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>/Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_SynthetikLaserCell"]/ammoTypes</xpath>
                    <value>
                        <BOR_Ammo_SynthetikLaserCell_EC>BOR_Bullet_SynthetikLaserCell_EC</BOR_Ammo_SynthetikLaserCell_EC>
                        <BOR_Ammo_SynthetikLaserCell_CM>BOR_Bullet_SynthetikLaserCell_CM</BOR_Ammo_SynthetikLaserCell_CM>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>RimThunder - Roaring Tiger</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- M1A2 Bullet_120mmCannonShell_HEAT -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="RT_M1A2_Tank_Turret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_120mmCannonShell_CMiAT</li>
                        <li>BOR_Ammo_120mmCannonShell_CMi</li>
                    </value>
                </li>

                <!-- m48H Bullet_105x617mmRCannonShell_HEAT -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="RT_M48H_Tank_Turret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_105x617mmRCannonShell_CMiAT</li>
                        <li>BOR_Ammo_105x617mmRCannonShell_CMi</li>
                    </value>
                </li>
                <!-- RT_M113M_APC_Turret 81mm -->

                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="RT_M113M_APC_Turret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Shell_Mortar_CMi</li>
                        <li>BOR_Shell_Mortar_CMc</li>
                        <li>BOR_Shell_Mortar_Ion_CM</li>
                        <li MayRequire="paradox.morevanillaturrets">BOR_Shell_CMDev</li>
                    </value>
                </li>

                <!-- RT Turrets -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/Vehicles.VehicleTurretDef[defName="RT_M1A2T_SecondaryTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_AntiMateriel_FSJ</li>
                        <li>BOR_Ammo_AntiMateriel_CMi</li>
                        <li>BOR_Ammo_AntiMateriel_CaP</li>
                        <li>BOR_Ammo_AntiMateriel_EC</li>
                    </value>
                </li>

                <li Class="PatchOperationAdd">
                    <xpath> Defs/Vehicles.VehicleTurretDef[defName="RT_M2HB_MGTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_AntiMateriel_FSJ</li>
                        <li>BOR_Ammo_AntiMateriel_CMi</li>
                        <li>BOR_Ammo_AntiMateriel_CaP</li>
                        <li>BOR_Ammo_AntiMateriel_EC</li>
                    </value>
                </li>

                <li Class="PatchOperationAdd">
                    <xpath> Defs/Vehicles.VehicleTurretDef[defName="RT_M249_MGTurret"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_762x51mmNATO_EC</li>
                    </value>
                </li>

                <li Class="PatchOperationAdd">
                    <xpath> Defs/Vehicles.VehicleTurretDef[defName="RT_M249_MGTurret_HEMTT"]/ammunition/thingDefs</xpath>
                    <value>
                        <li>BOR_Ammo_762x51mmNATO_EC</li>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>