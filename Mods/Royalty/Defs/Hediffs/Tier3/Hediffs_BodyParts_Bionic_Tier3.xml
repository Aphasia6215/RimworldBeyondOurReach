<?xml version="1.0" encoding="utf-8"?>
<Defs>

  <!-- Neurocalculator -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>NeurocalculatorEnigmatic</defName>
    <label>enigmatic neurocalculator</label>
    <labelNoun>an enigmatic neurocalculator</labelNoun>
    <description>An installed enigmatic neurocalculator.</description>
    <descriptionHyperlinks>
      <ThingDef>NeurocalculatorEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>NeurocalculatorEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <ResearchSpeed>1.2</ResearchSpeed>
        </statOffsets>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_ReactOnDamage">
        <damageDefIncoming>EMP</damageDefIncoming>
        <createHediff>BrainShock</createHediff>
      </li>
    </comps>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>NeurocalculatorEnigmatic</defName>
    <label>enigmatic neurocalculator</label>
    <description>A non-intelligent microcomputer controlled by a visual/tactile neural interface. It assists with memory and calculation, like a calculator and notepad embedded in the brain.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallNeurocalculatorEnigmatic</RecipeDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>0.80</drawSize>
      <color>(189,169,118)</color>
    </graphicData>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallNeurocalculatorEnigmatic</defName>
    <label>install enigmatic neurocalculator</label>
    <description>Install a neurocalculator.</description>
    <descriptionHyperlinks>
      <ThingDef>NeurocalculatorEnigmatic</ThingDef>
      <HediffDef>NeurocalculatorEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic neurocalculator.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>NeurocalculatorEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>NeurocalculatorEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Brain</li>
    </appliedOnFixedBodyParts>
    <addsHediff>NeurocalculatorEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveNeurocalculatorEnigmatic</defName>
    <label>remove enigmatic neurocalculator</label>
    <description>Remove neurocalculator.</description>
    <descriptionHyperlinks>
      <ThingDef>NeurocalculatorEnigmatic</ThingDef>
      <HediffDef>NeurocalculatorEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic neurocalculator.</jobString>
    <removesHediff>NeurocalculatorEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Learning assistant -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>LearningAssistantEnigmatic</defName>
    <label>enigmatic learning assistant</label>
    <labelNoun>an enigmatic learning assistant</labelNoun>
    <description>An installed enigmatic learning assistant.</description>
    <descriptionHyperlinks>
      <ThingDef>LearningAssistantEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>LearningAssistantEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <GlobalLearningFactor>1.2</GlobalLearningFactor>
        </statOffsets>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_ReactOnDamage">
        <damageDefIncoming>EMP</damageDefIncoming>
        <createHediff>BrainShock</createHediff>
      </li>
    </comps>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>LearningAssistantEnigmatic</defName>
    <label>enigmatic learning assistant</label>
    <description>A sensory recording system that replays important experiences during sleep, strengthening the formation of new memories.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallLearningAssistantEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallLearningAssistantEnigmatic</defName>
    <label>install enigmatic learning assistant</label>
    <description>Install a learning assistant.</description>
    <descriptionHyperlinks>
      <ThingDef>LearningAssistantEnigmatic</ThingDef>
      <HediffDef>LearningAssistantEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic learning assistant.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>LearningAssistantEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>LearningAssistantEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Brain</li>
    </appliedOnFixedBodyParts>
    <addsHediff>LearningAssistantEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveLearningAssistantEnigmatic</defName>
    <label>remove enigmatic learning assistant</label>
    <description>Remove learning assistant.</description>
    <descriptionHyperlinks>
      <ThingDef>LearningAssistantEnigmatic</ThingDef>
      <HediffDef>LearningAssistantEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic learning assistant.</jobString>
    <removesHediff>LearningAssistantEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Gastro-analyzer -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>GastroAnalyzerEnigmatic</defName>
    <label>enigmatic gastro-analyzer</label>
    <labelNoun>an enigmatic gastro-analyzer</labelNoun>
    <description>An installed enigmatic gastro-analyzer.</description>
    <descriptionHyperlinks>
      <ThingDef>GastroAnalyzerEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <addedPartProps>
      <solid>true</solid>
    </addedPartProps>
    <stages>
      <li>
        <statOffsets>
          <CookSpeed>15</CookSpeed>
        </statOffsets>
      </li>
    </stages>
    <spawnThingOnRemoved>GastroAnalyzerEnigmatic</spawnThingOnRemoved>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>GastroAnalyzerEnigmatic</defName>
    <label>enigmatic gastro-analyzer</label>
    <description>This bionic nose implant enhances the sense of smell, with a focus towards food-related smells. A multi-layered ultrafine absorption mesh detects compounds in the air. A microprocessor formats the readings into an olfactory nerve signal to send to the brain through a nerve-link interface. The result is that the user can smell foods with a depth, richness, and precision unknown among unenhanced humans, allowing them to cook more effectively. The whole unit is small enough to be installed in the nose without affecting the user's appearance.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallGastroAnalyzerEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallGastroAnalyzerEnigmatic</defName>
    <label>install enigmatic gastro-analyzer</label>
    <description>Install a gastro-analyzer.</description>
    <descriptionHyperlinks>
      <ThingDef>GastroAnalyzerEnigmatic</ThingDef>
      <HediffDef>GastroAnalyzerEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic gastro-analyzer.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>GastroAnalyzerEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>GastroAnalyzerEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Nose</li>
    </appliedOnFixedBodyParts>
    <addsHediff>GastroAnalyzerEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveGastroAnalyzerEnigmatic</defName>
    <label>remove enigmatic gastro-analyzer</label>
    <description>Remove gastro-analyzer.</description>
    <descriptionHyperlinks>
      <ThingDef>GastroAnalyzerEnigmatic</ThingDef>
      <HediffDef>GastroAnalyzerEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic gastro-analyzer.</jobString>
    <removesHediff>GastroAnalyzerEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Immunoenhancer -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>ImmunoenhancerEnigmatic</defName>
    <label>enigmatic immunoenhancer</label>
    <labelNoun>an enigmatic immunoenhancer</labelNoun>
    <description>An installed enigmatic immunoenhancer.</description>
    <descriptionHyperlinks>
      <ThingDef>ImmunoenhancerEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>ImmunoenhancerEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <ImmunityGainSpeed>0.75</ImmunityGainSpeed>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>ImmunoenhancerEnigmatic</defName>
    <label>enigmatic immunoenhancer</label>
    <description>An analysis computer inspects the bloodstream, classifies pathogens, and rapidly prompts the body's natural immune system to respond to them faster than it could alone. This speeds immunity gain significantly.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallImmunoenhancerEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallImmunoenhancerEnigmatic</defName>
    <label>install enigmatic immunoenhancer</label>
    <description>Install an immunoenhancer.</description>
    <descriptionHyperlinks>
      <ThingDef>ImmunoenhancerEnigmatic</ThingDef>
      <HediffDef>ImmunoenhancerEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic immunoenhancer.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>ImmunoenhancerEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>ImmunoenhancerEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Kidney</li>
    </appliedOnFixedBodyParts>
    <addsHediff>ImmunoenhancerEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveImmunoenhancerEnigmatic</defName>
    <label>remove enigmatic immunoenhancer</label>
    <description>Remove immunoenhancer.</description>
    <descriptionHyperlinks>
      <ThingDef>ImmunoenhancerEnigmatic</ThingDef>
      <HediffDef>ImmunoenhancerEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic immunoenhancer.</jobString>
    <removesHediff>ImmunoenhancerEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Coagulator -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>CoagulatorEnigmatic</defName>
    <label>enigmatic coagulator</label>
    <labelNoun>an enigmatic coagulator</labelNoun>
    <description>An installed enigmatic coagulator implant.</description>
    <descriptionHyperlinks>
      <ThingDef>CoagulatorEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>CoagulatorEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <totalBleedFactor>0.1</totalBleedFactor>
      </li>
    </stages>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>CoagulatorEnigmatic</defName>
    <label>enigmatic coagulator</label>
    <description>Releases coagulating factors in response to blood loss, reducing bleeding rates significantly.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallCoagulatorEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallCoagulatorEnigmatic</defName>
    <label>install enigmatic coagulator</label>
    <description>Install a coagulator.</description>
    <descriptionHyperlinks>
      <ThingDef>CoagulatorEnigmatic</ThingDef>
      <HediffDef>CoagulatorEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic coagulator.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>CoagulatorEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>CoagulatorEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Torso</li>
    </appliedOnFixedBodyParts>
    <addsHediff>CoagulatorEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveCoagulatorEnigmatic</defName>
    <label>remove enigmatic coagulator</label>
    <description>Remove coagulator.</description>
    <descriptionHyperlinks>
      <ThingDef>CoagulatorEnigmatic</ThingDef>
      <HediffDef>CoagulatorEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic coagulator.</jobString>
    <removesHediff>CoagulatorEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Healing enhancer -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>HealingEnhancerEnigmatic</defName>
    <label>enigmatic healing enhancer</label>
    <labelNoun>an enigmatic healing enhancer</labelNoun>
    <description>An installed enigmatic healing enhancer implant.</description>
    <descriptionHyperlinks>
      <ThingDef>HealingEnhancerEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>HealingEnhancerEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <naturalHealingFactor>5.0</naturalHealingFactor>
      </li>
    </stages>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>HealingEnhancerEnigmatic</defName>
    <label>enigmatic healing enhancer</label>
    <description>Releases nanomachines and healing factors that speed up wound healing. This implant only helps with physical wounds, and does nothing to combat disease or other health problems.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallHealingEnhancerEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallHealingEnhancerEnigmatic</defName>
    <label>install enigmatic healing enhancer</label>
    <description>Install a healing enhancer.</description>
    <descriptionHyperlinks>
      <ThingDef>HealingEnhancerEnigmatic</ThingDef>
      <HediffDef>HealingEnhancerEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic healing enhancer.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>HealingEnhancerEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>HealingEnhancerEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Torso</li>
    </appliedOnFixedBodyParts>
    <addsHediff>HealingEnhancerEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveHealingEnhancerEnigmatic</defName>
    <label>remove enigmatic healing enhancer</label>
    <description>Remove healing enhancer.</description>
    <descriptionHyperlinks>
      <ThingDef>HealingEnhancerEnigmatic</ThingDef>
      <HediffDef>HealingEnhancerEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic healing enhancer.</jobString>
    <removesHediff>HealingEnhancerEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Toughskin gland -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>ToughskinGlandEnigmatic</defName>
    <label>enigmatic toughskin gland</label>
    <labelNoun>an enigmatic toughskin gland</labelNoun>
    <description>An installed enigmatic toughskin gland.</description>
    <descriptionHyperlinks>
      <ThingDef>ToughskinGlandEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>ToughskinGlandEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <postFactor>0.75</postFactor>
          </li>
        </capMods>
        <statOffsets>
          <ArmorRating_Sharp>0.9</ArmorRating_Sharp>
          <ArmorRating_Blunt>0.75</ArmorRating_Blunt>
          <ArmorRating_Heat>0.9</ArmorRating_Heat>
        </statOffsets>
      </li>
    </stages>
    <tags>
      <li>ArmorGland</li>
    </tags>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>ToughskinGlandEnigmatic</defName>
    <label>enigmatic toughskin gland</label>
    <description>This bionic gland releases chemicals and nanomachines that toughen the skin, making it somewhat more resistant to damage. While it doesn't add as much protection as some other skin-hardening glands, the toughskin gland has the advantage of not noticeably altering the user's appearance.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallToughskinGlandEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallToughskinGlandEnigmatic</defName>
    <label>install enigmatic toughskin gland</label>
    <description>Install a toughskin gland.</description>
    <descriptionHyperlinks>
      <ThingDef>ToughskinGlandEnigmatic</ThingDef>
      <HediffDef>ToughskinGlandEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic toughskin gland.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>ToughskinGlandEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>ToughskinGlandEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Torso</li>
    </appliedOnFixedBodyParts>
    <addsHediff>ToughskinGlandEnigmatic</addsHediff>
    <incompatibleWithHediffTags>
      <li>ArmorGland</li>
    </incompatibleWithHediffTags>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveToughskinGlandEnigmatic</defName>
    <label>remove enigmatic toughskin gland</label>
    <description>Remove toughskin gland.</description>
    <descriptionHyperlinks>
      <ThingDef>ToughskinGlandEnigmatic</ThingDef>
      <HediffDef>ToughskinGlandEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic toughskin gland.</jobString>
    <removesHediff>ToughskinGlandEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Armorskin gland -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>ArmorskinGlandEnigmatic</defName>
    <label>enigmatic armorskin gland</label>
    <labelNoun>an enigmatic armorskin gland</labelNoun>
    <description>An installed enigmatic armorskin gland.</description>
    <descriptionHyperlinks>
      <ThingDef>ArmorskinGlandEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>ArmorskinGlandEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <postFactor>0.65</postFactor>
          </li>
        </capMods>
        <statOffsets>
          <ArmorRating_Sharp>0.9</ArmorRating_Sharp>
          <ArmorRating_Blunt>0.9</ArmorRating_Blunt>
          <ArmorRating_Heat>0.9</ArmorRating_Heat>
          <PawnBeauty>-1</PawnBeauty>
        </statOffsets>
      </li>
    </stages>
    <tags>
      <li>ArmorGland</li>
    </tags>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>ArmorskinGlandEnigmatic</defName>
    <label>enigmatic armorskin gland</label>
    <description>This bionic gland releases chemicals and nanomachines that toughen the skin and add flexible subdermal keratin plates at strategic points. This makes the user more resistant to damage across their whole body. Unfortunately, these changes make the skin appear leathery, with wrinkles across the whole body and face, which is generally considered ugly.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallArmorskinGlandEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallArmorskinGlandEnigmatic</defName>
    <label>install enigmatic armorskin gland</label>
    <description>Install an armorskin gland.</description>
    <descriptionHyperlinks>
      <ThingDef>ArmorskinGlandEnigmatic</ThingDef>
      <HediffDef>ArmorskinGlandEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic armorskin gland.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>ArmorskinGlandEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>ArmorskinGlandEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Torso</li>
    </appliedOnFixedBodyParts>
    <addsHediff>ArmorskinGlandEnigmatic</addsHediff>
    <incompatibleWithHediffTags>
      <li>ArmorGland</li>
    </incompatibleWithHediffTags>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveArmorskinGlandEnigmatic</defName>
    <label>remove enigmatic armorskin gland</label>
    <description>Remove armorskin gland.</description>
    <descriptionHyperlinks>
      <ThingDef>ArmorskinGlandEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic armorskin gland.</jobString>
    <removesHediff>ArmorskinGlandEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Stoneskin gland -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>StoneskinGlandEnigmatic</defName>
    <label>enigmatic stoneskin gland</label>
    <labelNoun>an enigmatic stoneskin gland</labelNoun>
    <description>An installed enigmatic stoneskin gland.</description>
    <descriptionHyperlinks>
      <ThingDef>StoneskinGlandEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>StoneskinGlandEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <postFactor>0.65</postFactor>
          </li>
        </capMods>
        <statOffsets>
          <ArmorRating_Sharp>0.95</ArmorRating_Sharp>
          <ArmorRating_Blunt>0.95</ArmorRating_Blunt>
          <ArmorRating_Heat>0.95</ArmorRating_Heat>
          <PawnBeauty>-4</PawnBeauty>
        </statOffsets>
      </li>
    </stages>
    <tags>
      <li>ArmorGland</li>
    </tags>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>StoneskinGlandEnigmatic</defName>
    <label>enigmatic stoneskin gland</label>
    <description>This bionic gland releases chemical and nanomachines that transform the user's skin into a built-in suit of armor. The whole epidermis thickens and hardens to resist burns, while jointed exterior keratin plates form everywhere they can - including the head and face. While it's very difficult to physically hurt someone using this implant, the plates and hard skin significantly reduces the user's physical attractiveness.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallStoneskinGlandEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallStoneskinGlandEnigmatic</defName>
    <label>install enigmatic stoneskin gland</label>
    <description>Install a stoneskin gland.</description>
    <descriptionHyperlinks>
      <ThingDef>StoneskinGlandEnigmatic</ThingDef>
      <HediffDef>StoneskinGlandEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic stoneskin gland.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>StoneskinGlandEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>StoneskinGlandEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Torso</li>
    </appliedOnFixedBodyParts>
    <addsHediff>StoneskinGlandEnigmatic</addsHediff>
    <incompatibleWithHediffTags>
      <li>ArmorGland</li>
    </incompatibleWithHediffTags>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveStoneskinGlandEnigmatic</defName>
    <label>remove enigmatic stoneskin gland</label>
    <description>Remove stoneskin gland.</description>
    <descriptionHyperlinks>
      <ThingDef>StoneskinGlandEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic stoneskin gland.</jobString>
    <removesHediff>StoneskinGlandEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Aesthetic shaper -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>AestheticShaperEnigmatic</defName>
    <label>enigmatic aesthetic shaper</label>
    <labelNoun>an enigmatic aesthetic shaper</labelNoun>
    <description>An installed enigmatic aesthetic shaper.</description>
    <descriptionHyperlinks>
      <ThingDef>AestheticShaperEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>AestheticShaperEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <PawnBeauty>4</PawnBeauty>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>AestheticShaperEnigmatic</defName>
    <label>enigmatic aesthetic shaper</label>
    <description>A sophisticated package of hormonal and mechanite influences shapes the muscles and fat on the body, adding non-functional aesthetic tissue where needed to achieve a desired appearance. This implant can be configured to form various body shapes according to the user's taste - or that of their partner.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallAestheticShaperEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallAestheticShaperEnigmatic</defName>
    <label>install enigmatic aesthetic shaper</label>
    <description>Install an aesthetic shaper.</description>
    <descriptionHyperlinks>
      <ThingDef>AestheticShaperEnigmatic</ThingDef>
      <HediffDef>AestheticShaperEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic aesthetic shaper.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>AestheticShaperEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>AestheticShaperEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Torso</li>
    </appliedOnFixedBodyParts>
    <addsHediff>AestheticShaperEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveAestheticShaperEnigmatic</defName>
    <label>remove enigmatic aesthetic shaper</label>
    <description>Remove aesthetic shaper.</description>
    <descriptionHyperlinks>
      <ThingDef>AestheticShaperEnigmatic</ThingDef>
      <HediffDef>AestheticShaperEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic aesthetic shaper.</jobString>
    <removesHediff>AestheticShaperEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Aesthetic nose -->

  <HediffDef ParentName="AddedBodyPartBase">
    <defName>AestheticNoseEnigmatic</defName>
    <label>enigmatic aesthetic nose</label>
    <labelNoun>an enigmatic aesthetic nose</labelNoun>
    <description>An installed enigmatic aesthetic nose.</description>
    <descriptionHyperlinks>
      <ThingDef>AestheticNoseEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>AestheticNoseEnigmatic</spawnThingOnRemoved>
    <addedPartProps>
      <partEfficiency>2</partEfficiency>
    </addedPartProps>
    <stages>
      <li>
        <statOffsets>
          <PawnBeauty>2</PawnBeauty>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>AestheticNoseEnigmatic</defName>
    <label>enigmatic aesthetic nose</label>
    <description>The nose is shaped to the user's desired form, matching prevalent beauty standards and enhancing physical impressions.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallAestheticNoseEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>InstallAestheticNoseEnigmatic</defName>
    <label>install enigmatic aesthetic nose</label>
    <description>Install an aesthetic nose.</description>
    <descriptionHyperlinks>
      <ThingDef>AestheticNoseEnigmatic</ThingDef>
      <HediffDef>AestheticNoseEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic aesthetic nose.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>AestheticNoseEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>AestheticNoseEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Nose</li>
    </appliedOnFixedBodyParts>
    <addsHediff>AestheticNoseEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveAestheticNoseEnigmatic</defName>
    <label>remove enigmatic aesthetic nose</label>
    <description>Remove aesthetic nose.</description>
    <descriptionHyperlinks>
      <ThingDef>AestheticNoseEnigmatic</ThingDef>
      <HediffDef>AestheticNoseEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic aesthetic nose.</jobString>
    <removesHediff>AestheticNoseEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Reprocessor stomach -->

  <HediffDef ParentName="AddedBodyPartBase">
    <defName>ReprocessorStomachEnigmatic</defName>
    <label>enigmatic reprocessor stomach</label>
    <labelNoun>an enigmatic reprocessor stomach</labelNoun>
    <description>An installed enigmatic reprocessor stomach.</description>
    <descriptionHyperlinks>
      <ThingDef>ReprocessorStomachEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>ReprocessorStomachEnigmatic</spawnThingOnRemoved>
    <addedPartProps>
      <solid>true</solid>
      <partEfficiency>2</partEfficiency>
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
    <stages>
      <li>
        <hungerRateFactor>0.1</hungerRateFactor>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_ReactOnDamage">
        <damageDefIncoming>EMP</damageDefIncoming>
        <vomit>true</vomit>
      </li>
    </comps>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>ReprocessorStomachEnigmatic</defName>
    <label>enigmatic reprocessor stomach</label>
    <description>An advanced chemical processing system breaks down nutrients the body could normally never use, leading to increased efficiency.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallReprocessorStomachEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>InstallReprocessorStomachEnigmatic</defName>
    <label>install enigmatic reprocessor stomach</label>
    <description>Install a reprocessor stomach.</description>
    <descriptionHyperlinks>
      <ThingDef>ReprocessorStomachEnigmatic</ThingDef>
      <HediffDef>ReprocessorStomachEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic reprocessor stomach.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>ReprocessorStomachEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>ReprocessorStomachEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Stomach</li>
    </appliedOnFixedBodyParts>
    <addsHediff>ReprocessorStomachEnigmatic</addsHediff>
  </RecipeDef>
  <!-- Circadian assistant -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>CircadianAssistantEnigmatic</defName>
    <label>enigmatic circadian assistant</label>
    <labelNoun>an enigmatic circadian assistant</labelNoun>
    <description>An installed enigmatic circadian assistant.</description>
    <descriptionHyperlinks>
      <ThingDef>CircadianAssistantEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>CircadianAssistantEnigmatic</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <RestFallRateFactor>-0.8</RestFallRateFactor>
        </statOffsets>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_ReactOnDamage">
        <damageDefIncoming>EMP</damageDefIncoming>
        <createHediff>BrainShock</createHediff>
      </li>
    </comps>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>CircadianAssistantEnigmatic</defName>
    <label>enigmatic circadian assistant</label>
    <description>An artificial gland. Produces chemicals and nanomachines that clear toxin buildup from the brain.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallCircadianAssistantEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallCircadianAssistantEnigmatic</defName>
    <label>install enigmatic circadian assistant</label>
    <description>Install a circadian assistant.</description>
    <descriptionHyperlinks>
      <ThingDef>CircadianAssistantEnigmatic</ThingDef>
      <HediffDef>CircadianAssistantEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic circadian assistant.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>CircadianAssistantEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>CircadianAssistantEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Brain</li>
    </appliedOnFixedBodyParts>
    <addsHediff>CircadianAssistantEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveCircadianAssistantEnigmatic</defName>
    <label>remove enigmatic circadian assistant</label>
    <description>Remove circadian assistant.</description>
    <descriptionHyperlinks>
      <ThingDef>CircadianAssistantEnigmatic</ThingDef>
      <HediffDef>CircadianAssistantEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic circadian assistant.</jobString>
    <removesHediff>CircadianAssistantEnigmatic</removesHediff>
  </RecipeDef>

  <!-- Circadian half-cycler -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>CircadianHalfCyclerEnigmatic</defName>
    <label>enigmatic circadian half-cycler</label>
    <labelNoun>an enigmatic circadian half-cycler</labelNoun>
    <description>An installed enigmatic circadian half-cycler.</description>
    <descriptionHyperlinks>
      <ThingDef>CircadianHalfCyclerEnigmatic</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>CircadianHalfCyclerEnigmatic</spawnThingOnRemoved>
    <disablesNeeds>
      <li>Rest</li>
    </disablesNeeds>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.2</offset>
          </li>
        </capMods>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_ReactOnDamage">
        <damageDefIncoming>EMP</damageDefIncoming>
        <createHediff>BrainShock</createHediff>
      </li>
    </comps>
  </HediffDef>

  <ThingDef ParentName="BodyPartAOTCEnigmaticBase">
    <defName>CircadianHalfCyclerEnigmatic</defName>
    <label>enigmatic circadian half-cycler</label>
    <description>A signal redirector which isolates half of the brain, allowing the other half to sleep while the user remains outwardly awake. By alternating brain halves, the user never needs to sleep. Unfortunately, two hemispheres are better than one - working with half a brain causes a reduction in consciousness.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallCircadianHalfCyclerEnigmatic</RecipeDef>
    </descriptionHyperlinks>

  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantAOTCEnigmaticBase">
    <defName>InstallCircadianHalfCyclerEnigmatic</defName>
    <label>install enigmatic circadian half-cycler</label>
    <description>Install a circadian half-cycler.</description>
    <descriptionHyperlinks>
      <ThingDef>CircadianHalfCyclerEnigmatic</ThingDef>
      <HediffDef>CircadianHalfCyclerEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing enigmatic circadian half-cycler.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>CircadianHalfCyclerEnigmatic</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>CircadianHalfCyclerEnigmatic</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Brain</li>
    </appliedOnFixedBodyParts>
    <addsHediff>CircadianHalfCyclerEnigmatic</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemoveCircadianHalfCyclerEnigmatic</defName>
    <label>remove enigmatic circadian half-cycler</label>
    <description>Remove circadian half-cycler.</description>
    <descriptionHyperlinks>
      <ThingDef>CircadianHalfCyclerEnigmatic</ThingDef>
      <HediffDef>CircadianHalfCyclerEnigmatic</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing enigmatic circadian half-cycler.</jobString>
    <removesHediff>CircadianHalfCyclerEnigmatic</removesHediff>
  </RecipeDef>

</Defs>